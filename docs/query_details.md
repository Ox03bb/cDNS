# DNS Request and Response Details

DNS messages follow a fixed binary format defined in RFC 1035. Below is a detailed table of the **request** and **response** fields.

| Section | Field | Size | Description | Request Example | Response Example |
|--------|------|------|-------------|------------------|-------------------|
| **Header** | **ID** | 16 bits | Identifier to match request/response | `0x1a2b` | Same as request |
| | QR | 1 bit | 0=request, 1=response | 0 | 1 |
| | Opcode | 4 bits | 0=Standard, 1=Inverse, 2=Status | 0 | 0 |
| | AA | 1 bit | Authoritative Answer flag | 0 | 1 if authoritative |
| | TC | 1 bit | Truncated message | 0 | 0 |
| | RD | 1 bit | Recursion Desired | 1 if client asks | Copied |
| | RA | 1 bit | Recursion Available | – | 1 if server supports |
| | Z | 3 bits | Reserved, must be 0 | 0 | 0 |
| | RCODE | 4 bits | Response code (0=No error, 3=NXDOMAIN…) | – | 0 |
| | QDCOUNT | 16 bits | Number of questions | 1 | 1 |
| | ANCOUNT | 16 bits | Number of answers | 0 | e.g. 1 |
| | NSCOUNT | 16 bits | Number of authority records | 0 | e.g. 0 |
| | ARCOUNT | 16 bits | Number of additional records | 0 | e.g. 1 |
| **Question** | QNAME | variable | Domain name in labels (length+text) | `www.example.com` | Same |
| | QTYPE | 16 bits | Record type (A=1, AAAA=28, MX=15…) | 1 | Same |
| | QCLASS | 16 bits | Class (IN=1 for Internet) | 1 | Same |
| **Answer** | NAME | variable | Domain name or compression pointer | – | Points to QNAME |
| | TYPE | 16 bits | Record type of answer | – | 1 |
| | CLASS | 16 bits | Usually 1 | – | 1 |
| | TTL | 32 bits | Time to cache in seconds | – | e.g. 300 |
| | RDLENGTH | 16 bits | Length of RDATA | – | 4 |
| | RDATA | variable | Data (IPv4 address, etc.) | – | e.g. `93.184.216.34` |
| **Authority** | … | … | NS records for delegation | – | Optional |
| **Additional** | … | … | Extra info (e.g. glue A record, OPT for EDNS) | – | Optional |


- A **request** contains **Header + Question** only.
- A **response** echoes the Question and adds **Answer**, **Authority**, and/or **Additional** depending on the query type and server data.
- All numeric fields are transmitted in **network byte order** (big-endian).


## Section usage
- **Header**: Present in both request and response. | use in both request and response
- **Question**: Present in both request and response. | use in both request and response
- **Answer**: Present only in response if there is an answer. | use in response
- **Authority**: Present in response if the server provides authority info (e.g. referrals). | use in response
- **Additional**: Present in response for extra info (e.g. glue records, EDNS). | use in response

## Headers and Flags usage
- **ID**: Randomly generated by client in request, echoed in response. | use in both request and response
- **QR**: 0 in request, 1 in response. | use in both request and response
- **Opcode**: Usually 0 for standard queries. | use in both request and response
- **AA**: 0 in request, 1 in response if authoritative. | use in both request and response
- **TC**: 0 unless message is truncated. | use in both request and response
- **RD**: 1 if client wants recursion, copied in response. | use in both request and response
- **RA**: 0 in request, 1 in response if server supports recursion. | use in both request and response
- **Z**: Must be 0 in both request and response. | use in both request and response
- **RCODE**: 0 in request, 0 or error code in response. | use in response
- **QDCOUNT**: Number of questions, usually 1. | use in both request and response
- **ANCOUNT**: 0 in request, number of answers in response. | use in both request and response
- **NSCOUNT**: 0 in request, number of authority records in response. | use in both request and response
- **ARCOUNT**: 0 in request, number of additional records in response. | use in both request and response
- **QNAME**: Domain name queried, in both request and response. | use in both request and response
- **QTYPE**: Type of query (A, AAAA, MX, etc.), in both request and response. | use in both request and response
- **QCLASS**: Usually 1 (IN for Internet), in both request and response. | use in both request and response
- **NAME**: Domain name or pointer in answers, authority, and additional sections. | use in response
- **TYPE**: Type of record in answers, authority, and additional sections. | use in response
- **CLASS**: Usually 1 (IN for Internet) in answers, authority, and additional sections. | use in response
- **TTL**: Time to live for caching, in answers, authority, and additional sections. | use in response
- **RDLENGTH**: Length of RDATA field, in answers, authority, and additional sections. | use in response
- **RDATA**: Actual data (IP address, etc.) in answers, authority, and additional sections. | use in response
